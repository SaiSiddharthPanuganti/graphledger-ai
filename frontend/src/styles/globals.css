@import url('https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap');

:root{
  --sidebar-bg:#0a0e1a;
  --amber:#f59e0b;
  --amber-light:#fde68a;
  --paper:#f4f1ea;
  --paper-dark:#e8e3d8;
  --card-bg:#ffffff;
  --text-main:#1a1a2e;
  --text-muted:#6b7280;
  --critical:#ef4444;
  --high:#f97316;
  --medium:#eab308;
  --low:#22c55e;
  --border:#e5e7eb;
  --sidebar-text:#a0aec0;
  --sidebar-active:#f59e0b;
  --anim-bg:#0a0e1a;
  --anim-panel:#0f1629;
  --anim-border:#1e2d4a;
  --anim-muted:#64748b;
  --anim-text:#e2e8f0;
  --hop0:#6366f1;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Sora',sans-serif;background:var(--paper);color:var(--text-main);display:flex;min-height:100vh;}

/* ── Sidebar ── */
.sidebar{width:240px;min-height:100vh;background:var(--sidebar-bg);display:flex;flex-direction:column;position:fixed;left:0;top:0;bottom:0;z-index:100;}
.sidebar-logo{padding:24px 20px;border-bottom:1px solid #1e2a3e;}
.sidebar-logo .brand{font-size:15px;font-weight:700;color:#fff;letter-spacing:-.3px;}
.sidebar-logo .sub{font-size:10px;color:var(--amber);font-family:'Space Mono',monospace;margin-top:2px;}
nav{flex:1;padding:16px 0;}
.nav-item{display:flex;align-items:center;gap:10px;padding:10px 20px;cursor:pointer;color:var(--sidebar-text);font-size:13px;font-weight:500;border-left:3px solid transparent;transition:.2s;text-decoration:none;}
.nav-item:hover{color:#fff;background:#141c2e;}
.nav-item.active{color:var(--amber);border-left-color:var(--amber);background:#141c2e;}
.nav-item .icon{font-size:16px;width:20px;text-align:center;}
.sidebar-stats{padding:16px 20px;border-top:1px solid #1e2a3e;}
.sidebar-stats-title{font-size:10px;color:#4a5568;font-family:'Space Mono',monospace;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;}
.stat-row{display:flex;justify-content:space-between;margin-bottom:6px;}
.stat-label{font-size:11px;color:var(--sidebar-text);}
.stat-val{font-size:11px;color:#fff;font-family:'Space Mono',monospace;}
.sidebar-footer{padding:14px 20px;font-size:10px;color:#3a4a5e;border-top:1px solid #141c2e;}

/* ── Main ── */
.main{margin-left:240px;flex:1;display:flex;flex-direction:column;min-width:0;width:calc(100vw - 240px);}
.topbar{position:sticky;top:0;z-index:50;background:var(--paper-dark);border-bottom:1px solid var(--border);padding:12px 28px;display:flex;align-items:center;gap:12px;}
.topbar h1{font-size:15px;font-weight:700;flex:1;color:var(--text-main);}
.period-select{padding:6px 12px;border:1px solid var(--border);border-radius:6px;background:white;font-size:12px;font-family:'Sora',sans-serif;cursor:pointer;}
.btn{padding:7px 16px;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer;border:none;transition:.2s;}
.btn-amber{background:var(--amber);color:#fff;}
.btn-amber:hover{background:#d97706;}
.btn-outline{background:white;border:1px solid var(--border);color:var(--text-main);}
.btn-outline:hover{background:var(--paper-dark);}
.loading-spin{display:inline-block;width:16px;height:16px;border:2px solid #fff;border-top-color:transparent;border-radius:50%;animation:spin 0.6s linear infinite;}

.content{padding:28px;flex:1;min-width:0;width:100%;box-sizing:border-box;}

/* ── Animations ── */
@keyframes fadeUp{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
@keyframes spin{to{transform:rotate(360deg);}}
@keyframes pulse{0%,100%{opacity:1;}50%{opacity:.4;}}
.card{background:var(--card-bg);border-radius:10px;padding:20px;box-shadow:0 1px 4px rgba(0,0,0,.07);animation:fadeUp .4s ease both;}
.card-title{font-size:12px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.6px;margin-bottom:16px;}

/* ── KPI Grid ── */
.kpi-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px;}
.kpi-card{background:var(--card-bg);border-radius:10px;padding:20px;box-shadow:0 1px 4px rgba(0,0,0,.07);animation:fadeUp .35s ease both;}
.kpi-label{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.6px;}
.kpi-val{font-size:28px;font-weight:700;font-family:'Space Mono',monospace;color:var(--text-main);margin:6px 0 4px;}
.kpi-sub{font-size:11px;color:var(--text-muted);}
.kpi-accent{color:var(--amber);}
.kpi-critical{color:var(--critical);}

/* ── Badges ── */
.badge{display:inline-block;padding:2px 8px;border-radius:4px;font-size:10px;font-weight:700;font-family:'Space Mono',monospace;}
.badge-critical{background:#fee2e2;color:#b91c1c;}
.badge-high{background:#ffedd5;color:#c2410c;}
.badge-medium{background:#fef9c3;color:#a16207;}
.badge-low{background:#dcfce7;color:#15803d;}
.badge-pending{background:#fef3c7;color:#92400e;}
.badge-progress{background:#dbeafe;color:#1e40af;}
.badge-resolved{background:#d1fae5;color:#065f46;}

/* ── Tables ── */
.table-wrap{overflow-x:auto;border-radius:8px;border:1px solid var(--border);}
table{width:100%;border-collapse:collapse;font-size:12px;}
thead th{background:#f8fafc;padding:10px 12px;text-align:left;font-size:10px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.6px;border-bottom:1px solid var(--border);}
tbody td{padding:10px 12px;border-bottom:1px solid #f1f5f9;vertical-align:middle;}
tbody tr:hover{background:#fafafa;}
tbody tr:last-child td{border-bottom:none;}
.mono{font-family:'Space Mono',monospace;font-size:11px;}

/* ── Two col layout ── */
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:24px;}
.three-col{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px;}

/* ── Search & filter bar ── */
.filter-bar{display:flex;gap:10px;margin-bottom:14px;align-items:center;}
.search-input{flex:1;padding:8px 12px;border:1px solid var(--border);border-radius:6px;font-size:12px;font-family:'Sora',sans-serif;}
.search-input:focus{outline:none;border-color:var(--amber);}
select.filter-sel{padding:8px 12px;border:1px solid var(--border);border-radius:6px;font-size:12px;font-family:'Sora',sans-serif;background:white;cursor:pointer;}

/* ── Progress bar ── */
.prog-bar{background:#e5e7eb;border-radius:4px;height:6px;overflow:hidden;}
.prog-fill{height:100%;border-radius:4px;transition:width .6s ease;}
.prog-critical{background:var(--critical);}
.prog-high{background:var(--high);}
.prog-medium{background:var(--medium);}
.prog-low{background:var(--low);}
.prog-amber{background:var(--amber);}

/* ── ITC Chain ── */
.hop-node{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;border-radius:8px;margin-bottom:8px;border:1px solid;}
.hop-safe{background:#f0fdf4;border-color:#86efac;}
.hop-warn{background:#fffbeb;border-color:#fcd34d;}
.hop-risky{background:#fef2f2;border-color:#fca5a5;}
.hop-badge{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;font-family:'Space Mono',monospace;flex-shrink:0;}
.hop-info{flex:1;}
.hop-name{font-size:13px;font-weight:600;}
.hop-gstin{font-size:10px;color:var(--text-muted);font-family:'Space Mono',monospace;}
.hop-itc{font-family:'Space Mono',monospace;font-size:12px;font-weight:700;}
.hop-note{font-size:11px;color:var(--text-muted);margin-top:2px;}

/* ── Audit Terminal ── */
.audit-layout{display:grid;grid-template-columns:300px 1fr;gap:0;border:1px solid var(--border);border-radius:10px;overflow:hidden;min-height:520px;}
.audit-list{background:#f8fafc;border-right:1px solid var(--border);overflow-y:auto;}
.audit-list-item{padding:12px 16px;cursor:pointer;border-bottom:1px solid var(--border);transition:.15s;}
.audit-list-item:hover{background:#fff5d6;}
.audit-list-item.selected{background:#fff5d6;border-left:3px solid var(--amber);}
.audit-list-item .mis-id{font-size:10px;font-family:'Space Mono',monospace;color:var(--amber);}
.audit-list-item .mis-inv{font-size:12px;font-weight:600;margin:2px 0;}
.audit-list-item .mis-type{font-size:10px;color:var(--text-muted);}
.audit-panel{background:#0d1117;padding:0;display:flex;flex-direction:column;}
.audit-panel-header{padding:12px 16px;background:#161b22;display:flex;align-items:center;gap:8px;border-bottom:1px solid #30363d;}
.audit-panel-header span{font-size:11px;font-family:'Space Mono',monospace;color:#8b949e;}
.audit-panel-btns{margin-left:auto;display:flex;gap:6px;}
.term-btn{padding:4px 10px;background:#21262d;border:1px solid #30363d;border-radius:4px;color:#cdd9e5;font-size:10px;cursor:pointer;font-family:'Space Mono',monospace;}
.term-btn:hover{background:#30363d;}
.audit-content{padding:20px;color:#c9d1d9;font-family:'Space Mono',monospace;font-size:11px;line-height:1.8;white-space:pre-wrap;flex:1;overflow-y:auto;max-height:480px;}

/* ── Risk score circle ── */
.risk-circle{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;font-family:'Space Mono',monospace;color:#fff;flex-shrink:0;}

/* ── Alerts ── */
.alert-item{display:flex;align-items:center;gap:10px;padding:12px 16px;border-radius:8px;background:#fef2f2;border:1px solid #fca5a5;margin-bottom:8px;}
.pulse-dot{width:10px;height:10px;border-radius:50%;background:var(--critical);animation:pulse 1.2s ease-in-out infinite;flex-shrink:0;}

/* ── Legal citations ── */
.legal-panel{background:#1e293b;border-radius:8px;padding:16px;}
.legal-item{padding:8px 0;border-bottom:1px solid #334155;font-size:11px;color:#94a3b8;}
.legal-item:last-child{border-bottom:none;}
.legal-sec{font-family:'Space Mono',monospace;color:var(--amber);font-size:11px;}

/* ── SVG Graph ── */
.graph-svg-wrap{background:#0d1117;border-radius:8px;padding:8px;overflow:hidden;}
svg text{font-family:'Space Mono',monospace;}

/* ── Cypher panel ── */
.cypher-panel{background:#0d1117;border-radius:8px;padding:16px;}
.cypher-query{background:#161b22;border-radius:6px;padding:12px;margin-bottom:10px;font-family:'Space Mono',monospace;font-size:10px;color:#79c0ff;line-height:1.6;}
.cypher-title{font-size:10px;color:#8b949e;margin-bottom:6px;}

/* ── Period cards ── */
.period-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:16px;}
.period-card{background:var(--paper-dark);border-radius:8px;padding:14px;}
.period-month{font-size:11px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;}
.period-rate{font-size:22px;font-weight:700;font-family:'Space Mono',monospace;margin:4px 0;}

/* ── Modal ── */
.modal-backdrop{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:999;align-items:center;justify-content:center;}
.modal-backdrop.open{display:flex;}
.modal{background:#fff;border-radius:12px;padding:28px;max-width:640px;width:90%;max-height:80vh;overflow-y:auto;}
.modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;}
.modal-close{background:none;border:none;font-size:20px;cursor:pointer;color:var(--text-muted);}
.modal-body{font-family:'Space Mono',monospace;font-size:11px;white-space:pre-wrap;background:#0d1117;color:#c9d1d9;padding:16px;border-radius:8px;line-height:1.8;max-height:400px;overflow-y:auto;}

/* ── Contagion alert ── */
.contagion-alert{background:#fff5f5;border:1px solid #fca5a5;border-radius:8px;padding:14px;margin-top:14px;}
.contagion-title{font-size:12px;font-weight:700;color:var(--critical);margin-bottom:6px;}
.contagion-path{font-family:'Space Mono',monospace;font-size:12px;color:var(--critical);letter-spacing:1px;}

/* ── AI Insight cards ── */
.insight-card{background:linear-gradient(135deg,#1e293b,#0f172a);color:#e2e8f0;border-radius:10px;padding:18px;margin-bottom:12px;}
.insight-vendor{font-size:12px;font-weight:700;color:var(--amber);margin-bottom:6px;}
.insight-text{font-size:12px;line-height:1.7;color:#94a3b8;}
.insight-action{margin-top:10px;font-size:11px;background:rgba(245,158,11,.15);border:1px solid rgba(245,158,11,.3);border-radius:6px;padding:8px;color:var(--amber-light);}

/* ════════════════════════════════════════════════════
   LIVE TRAVERSAL TAB — dark canvas layout
════════════════════════════════════════════════════ */
.traversal-page{margin:-28px;overflow:hidden;width:calc(100% + 56px);}
.traversal-wrap{height:calc(100vh - 52px);display:flex;flex-direction:column;background:var(--anim-bg);border-radius:0;overflow:hidden;width:100%;}
.trav-controls{display:flex;align-items:center;gap:8px;padding:9px 16px;background:var(--anim-panel);border-bottom:1px solid var(--anim-border);flex-shrink:0;flex-wrap:wrap;}
.trav-mode-btn{padding:5px 12px;border-radius:5px;font-size:11px;font-weight:600;cursor:pointer;border:1px solid var(--anim-border);background:transparent;color:var(--anim-muted);transition:.2s;font-family:'Sora',sans-serif;}
.trav-mode-btn:hover{color:var(--anim-text);border-color:var(--amber);}
.trav-mode-btn.active{background:rgba(245,158,11,.15);border-color:var(--amber);color:var(--amber);}
.trav-kpi-strip{display:grid;grid-template-columns:repeat(4,1fr);flex-shrink:0;}
.trav-kpi-item{padding:6px 14px;border-right:1px solid var(--anim-border);border-bottom:1px solid var(--anim-border);}
.trav-kpi-item:last-child{border-right:none;}
.trav-kpi-lbl{font-size:9px;color:var(--anim-muted);text-transform:uppercase;letter-spacing:.6px;}
.trav-kpi-val{font-size:15px;font-weight:700;font-family:'Space Mono',monospace;margin-top:1px;}
.trav-body{flex:1;display:flex;overflow:hidden;min-height:0;}
.trav-sidebar{width:250px;background:var(--anim-panel);border-right:1px solid var(--anim-border);display:flex;flex-direction:column;overflow:hidden;flex-shrink:0;}
.trav-canvas{flex:1;position:relative;overflow:hidden;background:var(--anim-bg);min-width:0;}
#graph-svg{width:100%;height:100%;display:block;}
.anim-tooltip{position:absolute;background:#1e293b;border:1px solid var(--anim-border);border-radius:8px;padding:10px 14px;font-size:11px;pointer-events:none;opacity:0;transition:opacity .15s;max-width:220px;z-index:200;}
.anim-tt-title{font-weight:700;color:var(--amber);margin-bottom:6px;font-size:12px;}
.anim-tt-row{display:flex;justify-content:space-between;gap:12px;margin-bottom:3px;}
.anim-tt-key{color:var(--anim-muted);}
.anim-tt-val{font-family:'Space Mono',monospace;color:var(--anim-text);}
.trav-sb-section{padding:8px 12px;border-bottom:1px solid var(--anim-border);flex-shrink:0;}
.trav-sb-title{font-size:9px;font-weight:700;color:var(--anim-muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px;}
.trav-legend-row{display:flex;align-items:center;gap:6px;margin-bottom:4px;font-size:10px;color:var(--anim-text);}
.trav-legend-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0;}
.trav-legend-rect{width:14px;height:7px;border-radius:2px;flex-shrink:0;}
.trav-log-area{flex:1;padding:6px 10px;overflow-y:auto;min-height:0;}
.trav-log-entry{font-size:10px;font-family:'Space Mono',monospace;padding:3px 0;border-bottom:1px solid var(--anim-bg);display:flex;gap:6px;align-items:flex-start;}
.trav-log-ts{color:var(--anim-muted);flex-shrink:0;}
.trav-log-msg{line-height:1.5;}
.log-ok{color:var(--low);}
.log-warn{color:var(--medium);}
.log-crit{color:var(--critical);}
.log-info{color:#3b82f6;}
.log-hop{color:var(--amber);}
.trav-step-bar{display:flex;gap:4px;padding:8px 14px;}
.trav-step-dot{width:8px;height:8px;border-radius:50%;background:var(--anim-border);transition:.3s;}
.trav-step-dot.done{background:var(--low);}
.trav-step-dot.active{background:var(--amber);box-shadow:0 0 6px var(--amber);}
.status-badge{display:inline-block;padding:2px 7px;border-radius:3px;font-size:9px;font-weight:700;font-family:'Space Mono',monospace;}
.sb-crit{background:#450a0a;color:#fca5a5;}
.sb-high{background:#431407;color:#fdba74;}
.sb-med{background:#422006;color:#fde68a;}
.sb-low{background:#052e16;color:#86efac;}
.sb-ok{background:#0c1d3e;color:#93c5fd;}
.trav-speed-label{font-size:11px;color:var(--anim-muted);font-family:'Space Mono',monospace;}
.trav-speed-range{width:80px;accent-color:var(--amber);}

/* ── OCR Upload Page ── */
.ocr-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px;}
.ocr-stat-card{background:#fff;border-radius:10px;padding:16px 20px;box-shadow:0 1px 4px rgba(0,0,0,.07);}
.ocr-stat-label{font-size:10px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.6px;margin-bottom:6px;}
.ocr-stat-val{font-size:22px;font-weight:700;font-family:'Space Mono',monospace;}
.drop-zone{border:2px dashed var(--border);border-radius:12px;padding:48px 24px;text-align:center;cursor:pointer;transition:.2s;background:#fafafa;margin-bottom:20px;}
.drop-zone:hover,.drop-zone.drag-over{border-color:var(--amber);background:rgba(245,158,11,.04);}
.drop-zone-icon{font-size:48px;margin-bottom:12px;}
.drop-zone-title{font-size:15px;font-weight:600;color:var(--text-main);margin-bottom:6px;}
.drop-zone-sub{font-size:12px;color:var(--text-muted);}
.file-chip{display:inline-flex;align-items:center;gap:8px;background:var(--paper-dark);border-radius:20px;padding:6px 14px;font-size:12px;font-weight:600;margin-bottom:16px;}
.file-chip-remove{cursor:pointer;color:var(--text-muted);font-size:14px;line-height:1;}
.file-chip-remove:hover{color:var(--critical);}
.ocr-results{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:24px;}
.field-table{width:100%;border-collapse:collapse;font-size:12px;}
.field-table td{padding:7px 10px;border-bottom:1px solid var(--border);}
.field-table td:first-child{color:var(--text-muted);font-size:11px;width:38%;}
.field-table td:last-child{font-family:'Space Mono',monospace;font-size:10px;color:var(--text-muted);}

/* ── Chatbot ──────────────────────────────────────────────────────────────── */
.chat-bubble{position:fixed;bottom:28px;right:28px;width:54px;height:54px;border-radius:50%;background:var(--amber);border:none;font-size:22px;cursor:pointer;box-shadow:0 4px 20px rgba(245,158,11,.45);z-index:1100;display:flex;align-items:center;justify-content:center;transition:transform .2s,box-shadow .2s;}
.chat-bubble:hover{transform:scale(1.1);box-shadow:0 6px 28px rgba(245,158,11,.6);}
.chat-unread-dot{position:absolute;top:2px;right:2px;width:12px;height:12px;border-radius:50%;background:#ef4444;border:2px solid #fff;}
.chat-panel{position:fixed;bottom:92px;right:28px;width:380px;max-height:580px;background:#fff;border-radius:16px;box-shadow:0 8px 40px rgba(0,0,0,.18);z-index:1100;display:flex;flex-direction:column;overflow:hidden;animation:chatSlideUp .25s ease;}
@keyframes chatSlideUp{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
.chat-header{background:var(--sidebar-bg);padding:14px 16px;display:flex;align-items:center;justify-content:space-between;}
.chat-header-left{display:flex;align-items:center;gap:10px;}
.chat-avatar{font-size:22px;width:36px;height:36px;background:rgba(245,158,11,.15);border-radius:50%;display:flex;align-items:center;justify-content:center;}
.chat-header-name{font-size:14px;font-weight:700;color:#fff;}
.chat-header-sub{font-size:11px;color:#94a3b8;display:flex;align-items:center;gap:5px;margin-top:2px;}
.chat-online-dot{width:7px;height:7px;border-radius:50%;background:#22c55e;display:inline-block;}
.chat-icon-btn{background:rgba(255,255,255,.08);border:none;color:#94a3b8;cursor:pointer;width:28px;height:28px;border-radius:6px;font-size:13px;display:flex;align-items:center;justify-content:center;}
.chat-icon-btn:hover{background:rgba(255,255,255,.18);color:#fff;}
.chat-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px;background:#f8f9fa;}
.chat-msg{display:flex;align-items:flex-end;gap:8px;}
.chat-msg-user{flex-direction:row-reverse;}
.chat-msg-avatar{font-size:18px;flex-shrink:0;}
.chat-bubble-msg{padding:10px 14px;border-radius:14px;font-size:13px;line-height:1.55;max-width:82%;}
.chat-bubble-bot{background:#fff;color:var(--text-main);border-bottom-left-radius:4px;box-shadow:0 1px 4px rgba(0,0,0,.08);}
.chat-bubble-user{background:var(--amber);color:#fff;border-bottom-right-radius:4px;}
.chat-offline{border-left:3px solid #f97316;}
.chat-offline-badge{font-size:10px;color:#9a3412;margin-top:6px;background:rgba(249,115,22,.1);padding:3px 7px;border-radius:4px;display:inline-block;}
.chat-typing{display:flex;gap:5px;padding:12px 16px;}
.chat-typing span{width:7px;height:7px;background:#cbd5e1;border-radius:50%;animation:typingBounce 1.2s infinite;}
.chat-typing span:nth-child(2){animation-delay:.2s;}
.chat-typing span:nth-child(3){animation-delay:.4s;}
@keyframes typingBounce{0%,60%,100%{transform:translateY(0);}30%{transform:translateY(-6px);}}
.chat-suggestions{padding:8px 12px;border-top:1px solid var(--border);display:flex;flex-wrap:wrap;gap:6px;background:#fff;}
.chat-chip{background:var(--paper-dark);border:1px solid var(--border);border-radius:20px;padding:5px 10px;font-size:11px;cursor:pointer;color:var(--text-main);transition:.15s;}
.chat-chip:hover:not(:disabled){background:rgba(245,158,11,.12);border-color:var(--amber);color:#92400e;}
.chat-chip:disabled{opacity:.5;cursor:not-allowed;}
.chat-input-row{display:flex;gap:8px;padding:12px;border-top:1px solid var(--border);background:#fff;}
.chat-input{flex:1;border:1px solid var(--border);border-radius:10px;padding:9px 12px;font-size:13px;font-family:inherit;resize:none;outline:none;line-height:1.4;}
.chat-input:focus{border-color:var(--amber);box-shadow:0 0 0 3px rgba(245,158,11,.1);}
.chat-send-btn{background:var(--amber);border:none;color:#fff;width:38px;height:38px;border-radius:10px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:.15s;}
.chat-send-btn:hover:not(:disabled){background:#d97706;}
.chat-send-btn:disabled{opacity:.4;cursor:not-allowed;}
.chat-footer-note{text-align:center;font-size:10px;color:#94a3b8;padding:4px 0 8px;background:#fff;}
.conf-dots{display:flex;gap:3px;}
.conf-dot{width:8px;height:8px;border-radius:50%;background:var(--border);}
.conf-dot.filled{background:var(--amber);}
.validation-status-badge{display:inline-block;padding:8px 20px;border-radius:20px;font-size:13px;font-weight:700;margin-bottom:16px;}
.vs-clean{background:rgba(34,197,94,.15);color:#166534;}
.vs-flagged{background:rgba(249,115,22,.15);color:#9a3412;}
.vs-critical{background:rgba(239,68,68,.15);color:#991b1b;}
.mismatch-alert{border-radius:8px;padding:14px;margin-bottom:10px;border-left:4px solid;}
.mismatch-alert.critical{background:rgba(239,68,68,.07);border-color:#ef4444;}
.mismatch-alert.high{background:rgba(249,115,22,.07);border-color:#f97316;}
.mismatch-alert.medium{background:rgba(234,179,8,.07);border-color:#eab308;}
.mismatch-type{font-size:12px;font-weight:700;margin-bottom:4px;}
.mismatch-desc{font-size:11px;color:var(--text-muted);margin-bottom:6px;line-height:1.5;}
.mismatch-itc{font-size:12px;font-weight:700;color:var(--critical);margin-bottom:4px;}
.mismatch-legal{font-size:10px;color:var(--text-muted);margin-bottom:6px;}
.mismatch-action{background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.3);border-radius:6px;padding:7px 10px;font-size:11px;color:#92400e;}
.ocr-history-table{width:100%;border-collapse:collapse;font-size:12px;}
.ocr-history-table th{padding:10px 12px;text-align:left;font-size:10px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--border);}
.ocr-history-table td{padding:10px 12px;border-bottom:1px solid var(--border);vertical-align:middle;}
.toast{position:fixed;bottom:24px;right:24px;background:#1a1a2e;color:#fff;padding:12px 20px;border-radius:8px;font-size:13px;z-index:1000;animation:fadeUp .3s ease;}
.conf-bar-wrap{margin-top:12px;padding-top:12px;border-top:1px solid var(--border);}
.conf-bar-label{font-size:11px;color:var(--text-muted);margin-bottom:6px;}
.conf-bar{height:6px;background:var(--border);border-radius:3px;overflow:hidden;}
.conf-bar-fill{height:100%;background:var(--amber);border-radius:3px;transition:width .6s ease;}

/* ── ITC Calculator ── */
.calc-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px;}
.calc-form{display:flex;flex-direction:column;gap:14px;}
.calc-field label{display:block;font-size:11px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:5px;}
.calc-input{width:100%;border:1px solid var(--border);border-radius:8px;padding:9px 12px;font-size:13px;font-family:inherit;outline:none;box-sizing:border-box;}
.calc-input:focus{border-color:var(--amber);box-shadow:0 0 0 3px rgba(245,158,11,.1);}
.calc-select{width:100%;border:1px solid var(--border);border-radius:8px;padding:9px 12px;font-size:13px;font-family:inherit;outline:none;background:#fff;box-sizing:border-box;}
.toggle-group{display:flex;gap:0;border:1px solid var(--border);border-radius:8px;overflow:hidden;}
.toggle-btn{flex:1;padding:8px;font-size:12px;font-weight:600;border:none;cursor:pointer;background:#fff;color:var(--text-muted);transition:.15s;}
.toggle-btn.active{background:var(--amber);color:#fff;}
.eligibility-result{border-radius:10px;padding:16px;margin-bottom:12px;text-align:center;}
.eligibility-result.eligible{background:rgba(34,197,94,.08);border:1px solid rgba(34,197,94,.3);}
.eligibility-result.partial{background:rgba(234,179,8,.08);border:1px solid rgba(234,179,8,.3);}
.eligibility-result.blocked{background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.3);}
.eligibility-icon{font-size:28px;margin-bottom:6px;}
.eligibility-label{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;margin-bottom:6px;}
.eligibility-amount{font-size:26px;font-weight:700;font-family:'Space Mono',monospace;color:var(--amber);}
.blocking-reason{display:flex;align-items:flex-start;gap:8px;padding:8px 10px;background:rgba(239,68,68,.06);border-radius:6px;margin-bottom:6px;font-size:12px;color:#991b1b;}
.liability-total{font-size:28px;font-weight:700;font-family:'Space Mono',monospace;color:var(--critical);margin:12px 0;}
.legal-card{background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.2);border-radius:8px;padding:12px 14px;margin-bottom:10px;}
.legal-card p{font-size:12px;color:var(--text-muted);margin:0 0 4px;}
.action-steps{background:#fff8f0;border:1px solid rgba(245,158,11,.3);border-radius:8px;padding:14px;}
.action-steps p{font-size:12px;margin:0 0 6px;color:var(--text-main);}
.batch-stat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:20px;}
.breakdown-table{width:100%;border-collapse:collapse;font-size:13px;}
.breakdown-table td{padding:8px 12px;border-bottom:1px solid var(--border);}
.breakdown-table td:last-child{text-align:right;font-family:'Space Mono',monospace;font-weight:600;}
.breakdown-table tr:last-child td{font-weight:700;font-size:14px;background:rgba(239,68,68,.04);}
.rule36-bar{background:var(--paper-dark);border-radius:6px;padding:10px 12px;font-size:12px;margin-top:10px;}
